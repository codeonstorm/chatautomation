Prompt: hi
2025-02-28 10:40:24,055 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
Selected: model='llama3.2:1b-instruct-q4_0' created_at='2025-02-28T05:10:24.0543475Z' done=True 
done_reason='stop' total_duration=15468355100 load_duration=1170178400 
prompt_eval_count=367 prompt_eval_duration=5748448000 
eval_count=288 eval_duration=8542767000 
message=Message(role='assistant', content='', images=None, 
  tool_calls=[ToolCall(function=Function(name='greeting', 
                              arguments={'properties': {'query': {'description': 'The query', 'type': 'string'}}, 
                                'required': ['query'], 'type': 'object'})), 
  ToolCall(function=Function(name='add_two_numbers', 
                              arguments={'properties': {'a': {'description': 'The first number', 'type': 'integer'}, 'b': {'description': 'The second number', 'type': 'integer'}}, 'required': ['a', 'b'], 'type': 'object'})), 
  ToolCall(function=Function(name='subtract_two_numbers', arguments={'properties': {'a': {'description': '', 'type': 'integer'}, 'b': {'description': '', 'type': 'integer'}}, 'required': ['a', 'b'], 'type': 'object'})), 
  ToolCall(function=Function(name='retrive_data_for_aggregation', arguments={'properties': {'query': {'description': 'The query string to search for relevant documents', 'type': 'string'}}, 'required': ['query'], 'type': 'object'}))])


 == Calling function: == greeting Arguments: {'properties': {'query': {'description': 'The query', 'type': 'string'}}, 'required': ['query'], 'type': 'object'}



 == Calling function: == add_two_numbers Arguments: {'properties': {'a': {'description': 'The first number', 'type': 'integer'}, 'b': {'description': 'The second number', 'type': 'integer'}}, 'required': ['a', 'b'], 'type': 'object'}

ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 243, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\starlette\applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\starlette\middleware\errors.py", line 152, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\starlette\routing.py", line 735, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\starlette\routing.py", line 93, in app
    await func(session)
  File "C:\Users\ankit\anaconda3\envs\chatautomation\Lib\site-packages\fastapi\routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "D:\LLM-ws\chat atomation\chatbot1.py", line 155, in websocket_endpoint
    result = function_to_call(**function_args)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: add_two_numbers() got an unexpected keyword argument 'properties'
INFO:     connection closed




